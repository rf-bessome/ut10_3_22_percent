////////////////////////////////////////////////////////////////////////////////
// Модуль "ПродажиСервер", содержит процедуры и функции для
// проверки корректности документов продажи и для обработки введенных данных.
//
////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

#Область СлужебныеПроцедурыИФункцииЗаполненияПоОтгрузке

#КонецОбласти

#Область ПроцедурыПроверкиКорректностиЗаполненияДокументов

#КонецОбласти

#Область ПроцедурыИФункцииРасчетаЦенИСкидокВДокументахПродажи

#КонецОбласти

#Область ПроцедурыИнициализацииПравилПродаж

#КонецОбласти

#Область ПроцедурыИФункцииПолученияЗначенийРеквизитовПоУмолчанию

#КонецОбласти

#Область ПрочиеПроцедурыИФункции

// Возвращает статус, можно ли по документу пробить чек
//
// Параметры:
//	ДокументСсылка - ДокументСсылка - Документ, по которому проверяется возможность пробитие чека 
//
// Возвращаемое значение:
//	Булево - Истина, если пробить чек можно, иначе Ложь
Функция ВозможноПробитиеЧекаПоДокументу(ДокументСсылка, Контрагент) Экспорт

	ВозможноПробитиеЧека = Ложь;
	
	Если ТипЗнч(ДокументСсылка) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
		ВозможноПробитиеЧека = Истина;
	ИначеЕсли ТипЗнч(ДокументСсылка) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
		ВозможноПробитиеЧека = Истина;
	ИначеЕсли ТипЗнч(ДокументСсылка) = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") Тогда
		ВозможноПробитиеЧека = Истина;
	ИначеЕсли ТипЗнч(ДокументСсылка) = Тип("ДокументСсылка.КорректировкаДолга") Тогда
		ВозможноПробитиеЧека = Истина;
	КонецЕсли;
	
	КонтрагентЯвляетсяФизЛицом = Ложь;
	Если ЗначениеЗаполнено(Контрагент) Тогда
		ЮрФизЛицо = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Контрагент, "ЮрФизЛицо");
		КонтрагентЯвляетсяФизЛицом = (ЮрФизЛицо = Перечисления.ЮрФизЛицо.ФизЛицо);
	КонецЕсли;
	
	ВозможноПробитиеЧека = ВозможноПробитиеЧека И КонтрагентЯвляетсяФизЛицом;
	
	Возврат ВозможноПробитиеЧека;
	
КонецФункции

#КонецОбласти

#Область ЗаполнениеАналитикРасходовВДокументах

#КонецОбласти 

#Область ПроцедурыИФункцииРаботыСГТД

#КонецОбласти 

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#Область СлужебныйПрограммныйИнтерфейс

#КонецОбласти

#Область СлужебныеПроцедурыИФункцииЗаполненияПоОтгрузке

#КонецОбласти

#Область ПроцедурыФормированияВременныхТаблицДляПроверкиКорректностиЗаполненияДокументов

#КонецОбласти

#Область ПроцедурыФормированияЗапросовПроверкиКорректностиЗаполненияДокументов

#КонецОбласти

#Область ПроцедурыФормированияЗапросовПроверкиСоответствияДокументовУсловиямПродаж

#КонецОбласти

#Область ПроцедурыДляВыводаСообщенийОбОшибкахЗаполненияДокументов

#КонецОбласти

#Область ПроцедурыДляВыводаСообщенийОбОшибкахСоответствияДокументовУсловиямПродаж

#КонецОбласти

#Область СлужебныеПроцедурыИФункцииДляРасчетаЦенПродажи

#КонецОбласти

#Область ПроцедурыИнициализацииПравилПродаж

#КонецОбласти

#Область ПрочиеПроцедурыИФункции

#КонецОбласти

#Область ЗаполнениеАналитикРасходовВДокументах

#КонецОбласти

#Область Наборы

#КонецОбласти

#КонецОбласти
